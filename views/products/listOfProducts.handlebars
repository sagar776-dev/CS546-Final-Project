<article class="product-list">
    {{#if error}}
    {{#each error}}
    <p>{{this}}</p>
    {{/each}}
    {{/if}}

    {{#if categoryList}}
    <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Category List
        </button>
        <ul class="dropdown-menu">
            {{#each categoryList}}
            <li>
                <a class="dropdown-item" href="/api/products/{{this}}?page=1">{{this}}</a>
            </li>
            {{/each}}
        </ul>
    </div>
    {{/if}}

    {{#if manufactort_List}}
    <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Manufactort List
        </button>
        <ul class="dropdown-menu">
            <li>
                <a class="dropdown-item" href="?page=1">All Manufacturers</a>
            </li>
            {{#each manufactort_List}}
            <li>
                <a class="dropdown-item" href="?page=1&manufacturer={{this}}">{{this}}</a>
            </li>
            {{/each}}
        </ul>
    </div>
    {{/if}}

    {{#if productList.page}}
    <nav aria-label="...">
        <ul class="pagination">
            {{#if productList.page.previous}}
            {{#if productList.page.manufacturer}}
            <li class="page-item">
                <a class="page-link"
                    href="?page={{productList.page.previous}}&manufacturer={{productList.page.manufacturer}}{{productList.page.query_list}}">Previous</a>
            </li>
            <li>
                <a class="page-link"
                    href="?page={{productList.page.previous}}&manufacturer={{productList.page.manufacturer}}{{productList.page.query_list}}">{{productList.page.previous}}</a>
            </li>
            {{else}}
            {{#if productList.page.search}}
            <li class="page-item">
                <a class="page-link"
                    href="?page={{productList.page.previous}}&search={{productList.page.search}}{{productList.page.query_list}}">Previous</a>
            </li>
            <li>
                <a class="page-link"
                    href="?page={{productList.page.previous}}&search={{productList.page.search}}{{productList.page.query_list}}">{{productList.page.previous}}</a>
            </li>
            {{else}}
            <li class="page-item">
                <a class="page-link"
                    href="?page={{productList.page.previous}}{{productList.page.query_list}}">Previous</a>
            </li>
            <li>
                <a class="page-link"
                    href="?page={{productList.page.previous}}{{productList.page.query_list}}">{{productList.page.previous}}</a>
            </li>
            {{/if}}
            {{/if}}
            {{else}}
            <li class="page-item disabled">
                <a class="page-link" href="">Previous</a>
            </li>
            {{/if}}

            {{#if productList.page.current}}
            <li class="page-item disabled">
                <a class="page-link" href="">{{productList.page.current}}</a>
            </li>
            {{/if}}

            {{#if productList.page.next}}
            {{#if productList.page.manufacturer}}
            <li>
                <a class="page-link"
                    href="?page={{productList.page.next}}&manufacturer={{productList.page.manufacturer}}">{{productList.page.next}}</a>
            </li>
            <li class="page-item">
                <a class="page-link"
                    href="?page={{productList.page.next}}&manufacturer={{productList.page.manufacturer}}">Next</a>
            </li>
            {{else}}
            {{#if productList.page.search}}
            <li>
                <a class="page-link"
                    href="?page={{productList.page.next}}&search={{productList.page.search}}">{{productList.page.next}}</a>
            </li>
            <li class="page-item">
                <a class="page-link" href="?page={{productList.page.next}}&search={{productList.page.search}}">Next</a>
            </li>
            {{else}}
            <li>
                <a class="page-link"
                    href="?page={{productList.page.next}}{{productList.page.query_list}}">{{productList.page.next}}</a>
            </li>
            <li class="page-item">
                <a class="page-link" href="?page={{productList.page.next}}{{productList.page.query_list}}">Next</a>
            </li>
            {{/if}}
            {{/if}}
            {{else}}
            <li class="page-item disabled">
                <a class="page-link" href="">Next</a>
            </li>
            {{/if}}
        </ul>
    </nav>
    {{/if}}

    {{#if productList}}
    <table class="table table-bordered">
        <tr>
            <td>
                <p>Price</p>
                <table>
                    <tr>
                        <td>
                            <form id="priceForm" method="get">
                                <table>
                                    <tr>
                                        <td>
                                            <label for="price">Choose order:</label>
                                            <select id="price" name="price" size="2">
                                                <option value="ascending">ascending</option>
                                                <option value="descending">descending</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" placeholder="min" pattern="[0-9]+" id="minPrice"
                                                name="min">
                                            <input type="text" placeholder="max" pattern="[0-9]+" id="maxPrice"
                                                name="max">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="checkbox" id="onSale" name="onSale" value="true">
                                            <label for="onSale">Products on Sale</label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="checkbox" id="Rating" name="Rating" value="true">
                                            <label for="Rating">Top Customer Rating</label>
                                        </td>
                                    </tr>
                                </table>
                                <button type="submit">Submit Filter</button>
                            </form>
                        </td>
                    </tr>
                </table>
            </td>

            <td>
                {{#if productList.results}}
                <table class="table table-bordered">
                    {{#each productList.results}}
                    <tr>
                        <td>
                            <img src={{ pictures.[0] }} alt="{{name}}" width="140" height="110">
                        </td>
                        <td>
                            <a href="/api/products/{{category}}/{{_id}}">{{name}}</a>
                            <p>Price: {{price}}</p>
                            <p>Review: {{customerReviewAverage}}</p>
                        </td>
                    </tr>
                    {{/each}}
                </table>
                {{/if}}
            </td>
        </tr>
    </table>
    {{/if}}

    {{#if productList.page}}
    <nav aria-label="...">
        <ul class="pagination">
            {{#if productList.page.previous}}
            {{#if productList.page.manufacturer}}
            <li class="page-item">
                <a class="page-link"
                    href="?page={{productList.page.previous}}&manufacturer={{productList.page.manufacturer}}">Previous</a>
            </li>
            <li>
                <a class="page-link"
                    href="?page={{productList.page.previous}}&manufacturer={{productList.page.manufacturer}}">{{productList.page.previous}}</a>
            </li>
            {{else}}
            <li class="page-item">
                <a class="page-link" href="?page={{productList.page.previous}}">Previous</a>
            </li>
            <li>
                <a class="page-link" href="?page={{productList.page.previous}}">{{productList.page.previous}}</a>
            </li>
            {{/if}}
            {{else}}
            <li class="page-item disabled">
                <a class="page-link" href="">Previous</a>
            </li>
            {{/if}}

            {{#if productList.page.current}}
            <li class="page-item disabled">
                <a class="page-link" href="">{{productList.page.current}}</a>
            </li>
            {{/if}}

            {{#if productList.page.next}}
            {{#if productList.page.manufacturer}}
            <li>
                <a class="page-link"
                    href="?page={{productList.page.next}}&manufacturer={{productList.page.manufacturer}}">{{productList.page.next}}</a>
            </li>
            <li class="page-item">
                <a class="page-link"
                    href="?page={{productList.page.next}}&manufacturer={{productList.page.manufacturer}}">Next</a>
            </li>
            {{else}}
            <li>
                <a class="page-link" href="?page={{productList.page.next}}">{{productList.page.next}}</a>
            </li>
            <li class="page-item">
                <a class="page-link" href="?page={{productList.page.next}}">Next</a>
            </li>
            {{/if}}
            {{else}}
            <li class="page-item disabled">
                <a class="page-link" href="">Next</a>
            </li>
            {{/if}}
        </ul>
    </nav>
    {{/if}}

</article>