<article class="product-list">
    {{#if error}}<p>{{error}}</p>{{/if}}

    {{#if categoryList}}
    <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Category List
        </button>
        <ul class="dropdown-menu">
            {{#each categoryList}}
            <li>
                <a class="dropdown-item" href="products/{{this}}?page=1">{{this}}</a>
            </li>
            {{/each}}
        </ul>
    </div>
    {{/if}}

    {{#if manufactort_List}}
    <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Manufactort List
        </button>
        <ul class="dropdown-menu">
            <li>
                <a class="dropdown-item" href="?page=1">All Manufacturers</a>
            </li>
            {{#each manufactort_List}}
            <li>
                <a class="dropdown-item" href="?page=1&manufacturer={{this}}">{{this}}</a>
            </li>
            {{/each}}
        </ul>
    </div>
    {{/if}}

    {{#if productList.page}}
    <nav aria-label="...">
        <ul class="pagination">
            {{#if productList.page.previous}}
            {{#if productList.page.manufacturer}}
            <li class="page-item">
                <a class="page-link"
                    href="?page={{productList.page.previous}}&manufacturer={{productList.page.manufacturer}}">Previous</a>
            </li>
            <li>
                <a class="page-link"
                    href="?page={{productList.page.previous}}&manufacturer={{productList.page.manufacturer}}">{{productList.page.previous}}</a>
            </li>
            {{else}}
            {{#if productList.page.search}}
            <li class="page-item">
                <a class="page-link"
                    href="?page={{productList.page.previous}}&search={{productList.page.search}}">Previous</a>
            </li>
            <li>
                <a class="page-link"
                    href="?page={{productList.page.previous}}&search={{productList.page.search}}">{{productList.page.previous}}</a>
            </li>
            {{else}}
            <li class="page-item">
                <a class="page-link" href="?page={{productList.page.previous}}">Previous</a>
            </li>
            <li>
                <a class="page-link" href="?page={{productList.page.previous}}">{{productList.page.previous}}</a>
            </li>
            {{/if}}
            {{/if}}
            {{else}}
            <li class="page-item disabled">
                <a class="page-link" href="">Previous</a>
            </li>
            {{/if}}

            {{#if productList.page.current}}
            <li class="page-item disabled">
                <a class="page-link" href="">{{productList.page.current}}</a>
            </li>
            {{/if}}

            {{#if productList.page.next}}
            {{#if productList.page.manufacturer}}
            <li>
                <a class="page-link"
                    href="?page={{productList.page.next}}&manufacturer={{productList.page.manufacturer}}">{{productList.page.next}}</a>
            </li>
            <li class="page-item">
                <a class="page-link"
                    href="?page={{productList.page.next}}&manufacturer={{productList.page.manufacturer}}">Next</a>
            </li>
            {{else}}
            {{#if productList.page.search}}
            <li>
                <a class="page-link"
                    href="?page={{productList.page.next}}&search={{productList.page.search}}">{{productList.page.next}}</a>
            </li>
            <li class="page-item">
                <a class="page-link" href="?page={{productList.page.next}}&search={{productList.page.search}}">Next</a>
            </li>
            {{else}}
            <li>
                <a class="page-link" href="?page={{productList.page.next}}">{{productList.page.next}}</a>
            </li>
            <li class="page-item">
                <a class="page-link" href="?page={{productList.page.next}}">Next</a>
            </li>
            {{/if}}
            {{/if}}
            {{else}}
            <li class="page-item disabled">
                <a class="page-link" href="">Next</a>
            </li>
            {{/if}}
        </ul>
    </nav>
    {{/if}}

    {{#if productList.results}}
    <table class="table table-bordered">
        {{#each productList.results}}
        <tr>
            <td>
                <img src={{ pictures.[0] }} alt="{{name}}" width="140" height="110">
            </td>
            <td>
                <a href="/products/{{category}}/{{_id}}">{{name}}</a>
                <p>Price: {{price}}</p>
                <p>Review: {{customerReviewAverage}}</p>
            </td>
        </tr>
        {{/each}}
    </table>
    {{else}}
    <p>Products not Found for {{productList.page.manufacturer}}</p>
    {{/if}}

    {{#if productList.page}}
    <nav aria-label="...">
        <ul class="pagination">
            {{#if productList.page.previous}}
            {{#if productList.page.manufacturer}}
            <li class="page-item">
                <a class="page-link"
                    href="?page={{productList.page.previous}}&manufacturer={{productList.page.manufacturer}}">Previous</a>
            </li>
            <li>
                <a class="page-link"
                    href="?page={{productList.page.previous}}&manufacturer={{productList.page.manufacturer}}">{{productList.page.previous}}</a>
            </li>
            {{else}}
            <li class="page-item">
                <a class="page-link" href="?page={{productList.page.previous}}">Previous</a>
            </li>
            <li>
                <a class="page-link" href="?page={{productList.page.previous}}">{{productList.page.previous}}</a>
            </li>
            {{/if}}
            {{else}}
            <li class="page-item disabled">
                <a class="page-link" href="">Previous</a>
            </li>
            {{/if}}

            {{#if productList.page.current}}
            <li class="page-item disabled">
                <a class="page-link" href="">{{productList.page.current}}</a>
            </li>
            {{/if}}

            {{#if productList.page.next}}
            {{#if productList.page.manufacturer}}
            <li>
                <a class="page-link"
                    href="?page={{productList.page.next}}&manufacturer={{productList.page.manufacturer}}">{{productList.page.next}}</a>
            </li>
            <li class="page-item">
                <a class="page-link"
                    href="?page={{productList.page.next}}&manufacturer={{productList.page.manufacturer}}">Next</a>
            </li>
            {{else}}
            <li>
                <a class="page-link" href="?page={{productList.page.next}}">{{productList.page.next}}</a>
            </li>
            <li class="page-item">
                <a class="page-link" href="?page={{productList.page.next}}">Next</a>
            </li>
            {{/if}}
            {{else}}
            <li class="page-item disabled">
                <a class="page-link" href="">Next</a>
            </li>
            {{/if}}
        </ul>
    </nav>
    {{/if}}

</article>